# `sch` is the name of the schema to be dealt with

SET FOREIGN_KEY_CHECKS = 0;
DROP SCHEMA IF EXISTS `sch`;
CREATE SCHEMA `sch` DEFAULT CHARACTER SET UTF8;
USE `sch`;

CREATE TABLE `chr` (`chr` INT(2) UNSIGNED NOT NULL, `chrname` VARCHAR(255) NOT NULL) ENGINE = INNODB;
CREATE TABLE `chrsupp` (`chr` INT(2) UNSIGNED NOT NULL, `chroff` INT(4) UNSIGNED  NOT NULL, `chrlen` INT(4) UNSIGNED NOT NULL) ENGINE = INNODB;
CREATE TABLE `col` (`col` INT(4) UNSIGNED NOT NULL, `test` TEXT NOT NULL) ENGINE = INNODB;

CREATE TABLE `ind` (`chr` INT(2) UNSIGNED NOT NULL, `nrow` INT(4) UNSIGNED NOT NULL, `ind` INT(4) UNSIGNED NOT NULL) ENGINE = INNODB;
CREATE TABLE `pos` (`ind` INT(4) UNSIGNED NOT NULL, `pos` INT(4) UNSIGNED NOT NULL) ENGINE = INNODB;
CREATE TABLE `alias` (`ind` INT(4) UNSIGNED NOT NULL, `alias` VARCHAR(31) NOT NULL) ENGINE = INNODB;
        
CREATE TABLE `v_ind` (`ind` INT(8) UNSIGNED NOT NULL, `col` INT(4) UNSIGNED NOT NULL, `v_ind` INT(8) UNSIGNED NOT NULL) ENGINE = INNODB;
CREATE TABLE `pval` (`v_ind` INT(8) UNSIGNED NOT NULL, `pval` DOUBLE NOT NULL) ENGINE = INNODB;
CREATE TABLE `ratio` (`v_ind` INT(8) UNSIGNED NOT NULL, `ratio` DOUBLE NOT NULL) ENGINE = INNODB;
CREATE TABLE `maf` (`v_ind` INT(8) UNSIGNED NOT NULL, `maf` DOUBLE NOT NULL) ENGINE = INNODB;
CREATE TABLE `r_pval` (`v_ind` INT(8) UNSIGNED NOT NULL, `r_pval` INT(8) UNSIGNED NOT NULL) ENGINE = INNODB;
CREATE TABLE `r_ratio` (`v_ind` INT(8) UNSIGNED NOT NULL, `r_ratio` INT(8) UNSIGNED NOT NULL) ENGINE = INNODB;

# Data load takes place here
# Index creation takes place only after the proper data loading

ALTER TABLE `chr` ADD PRIMARY KEY(`chr`);
ALTER TABLE `chr` ADD KEY(`chrname`);

ALTER TABLE `chrsupp` ADD PRIMARY KEY(`chr`);

ALTER TABLE `col` ADD PRIMARY KEY(`col`);

ALTER TABLE `ind` ADD PRIMARY KEY(`chr`,`nrow`);
ALTER TABLE `ind` ADD KEY(`ind`);

ALTER TABLE `pos` ADD PRIMARY KEY(`ind`);
ALTER TABLE `pos` ADD KEY(`pos`);

ALTER TABLE `alias` ADD PRIMARY KEY(`ind`);
ALTER TABLE `alias` ADD KEY(`alias`);

ALTER TABLE `v_ind` ADD PRIMARY KEY(`ind`,`col`);
ALTER TABLE `v_ind` ADD KEY(`v_ind`);

ALTER TABLE `pval` ADD PRIMARY KEY(`v_ind`);
ALTER TABLE `pval` ADD KEY(`pval`);

ALTER TABLE `ratio` ADD PRIMARY KEY(`v_ind`);
ALTER TABLE `ratio` ADD KEY(`ratio`);

ALTER TABLE `maf` ADD PRIMARY KEY(`v_ind`);
ALTER TABLE `maf` ADD KEY(`maf`);

ALTER TABLE `r_pval` ADD PRIMARY KEY(`v_ind`);
ALTER TABLE `r_pval` ADD KEY(`r_pval`);

ALTER TABLE `r_ratio` ADD PRIMARY KEY(`v_ind`);
ALTER TABLE `r_ratio` ADD KEY(`r_ratio`);
